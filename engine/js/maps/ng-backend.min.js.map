{"version":3,"sources":["ActionTypes.js","StateActions.js","middleware.js","reducer.js","index.js"],"names":["window","document","ActionTypes","GET_STATE","SET_STATE","StateActions","getState","console","log","type","meta","remote","url","trigger","setState","data","redux_middleware","store","next","action","Request","JSON","onComplete","resp","respRaw","dispatch","get","reducer","state","Immutable","Map","createStoreWithMiddleware","Redux","applyMiddleware","createStore","redux_store"],"mappings":"CAAA,SAAAA,EAAAC,GACA,YAEAD,GAAAE,aACAC,UAAA,YACAC,UAAA,cAEAJ,OAAAC,UCPA,SAAAD,EAAAC,GACA,YAEAD,GAAAK,cACAC,SAAA,WAEA,MADAC,SAAAC,IAAA,aAEAC,KAAAP,YAAAC,UACAO,MAAAC,QAAA,GACAC,IAAA,iBACAC,QAAA,aAGAC,SAAA,SAAAC,GAEA,MADAR,SAAAC,IAAA,aAEAC,KAAAP,YAAAE,UACAW,KAAAA,MAIAf,OAAAC,UCrBA,SAAAD,EAAAC,GACA,YAEAD,GAAAgB,iBAAA,SAAAC,GACA,MAAA,UAAAC,GACA,MAAA,UAAAC,GAcA,MAbAA,GAAAT,MAAAS,EAAAT,KAAAC,QAEA,GAAAS,SAAAC,MACAT,IAAAO,EAAAP,IACAU,WAAA,SAAAC,EAAAC,GAEAL,EAAAN,SACAI,EAAAQ,SAAApB,aAAAc,EAAAN,SAAAU,OAGAG,MAGAR,EAAAC,OAIAnB,OAAAC,UCvBA,SAAAD,EAAAC,GACA,YAEAD,GAAA2B,QAAA,SAAAC,EAAAT,GAGA,OAFAS,EAAAA,GAAAC,UAAAC,MAEAX,EAAAV,MACA,IAAAP,aAAAC,UACA,MAAAyB,EACA,KAAA1B,aAAAE,UACA,MAAAyB,WAAAC,IAAAX,EAAAJ,KACA,SACA,MAAAa,MAGA5B,OAAAC,UCfA,SAAAD,EAAAC,GACA,YAEA,IAAA8B,GAAAC,MAAAC,gBAAAjB,kBAAAgB,MAAAE,YAEAlC,GAAAmC,YAAAJ,EAAAJ,SACAQ,YAAAV,SAAApB,aAAAC,aACAN,OAAAC","file":"ng-backend.min.js","sourcesContent":["(function(window, document) {\n  'use strict';\n\n  window.ActionTypes = {\n    GET_STATE: 'GET_STATE',\n    SET_STATE: 'SET_STATE'\n  };\n})(window, document);","(function(window, document) {\n  'use strict';\n\n  window.StateActions = {\n    getState: function() {\n      console.log('getState');\n      return {\n        type: ActionTypes.GET_STATE,\n        meta: {remote: true},\n        url: '/_api/v1/state',\n        trigger: 'setState'\n      };\n    },\n    setState: function(data) {\n      console.log('setState');\n      return {\n        type: ActionTypes.SET_STATE,\n        data: data\n      };\n    }\n  };\n})(window, document);","(function(window, document) {\n  'use strict';\n\n  window.redux_middleware = function (store) {\n    return function (next) {\n      return function (action) {\n        if (action.meta && action.meta.remote) {\n          // @@@:TODO: Remove dependency on mootools later\n          new Request.JSON({\n            url: action.url,\n            onComplete: function(resp, respRaw) {\n              // @@@:TODO: Trigger an action\n              if (action.trigger) {\n                store.dispatch(StateActions[action.trigger](resp));\n              }\n            }\n          }).get();\n        }\n\n        return next(action);\n      };\n    };\n  };\n})(window, document);","(function(window, document) {\n  'use strict';\n\n  window.reducer = function(state, action) {\n    state = state || Immutable.Map();\n\n    switch (action.type) {\n      case ActionTypes.GET_STATE:\n        return state;\n      case ActionTypes.SET_STATE:\n        return Immutable.Map(action.data);\n      default:\n        return state;\n    }\n  };\n})(window, document);","(function(window, document) {\n  'use strict';\n\n  var createStoreWithMiddleware = Redux.applyMiddleware(redux_middleware)(Redux.createStore);\n\n  window.redux_store = createStoreWithMiddleware(reducer);\n  redux_store.dispatch(StateActions.getState());\n})(window, document);"],"sourceRoot":"/source/"}