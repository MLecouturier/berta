!function(e,t){"use strict";e.ActionTypes={GET_STATE:"GET_STATE",SET_STATE:"SET_STATE",CREATE_SITE:"CREATE_SITE",SITE_CREATED:"SITE_CREATED",UPDATE_SITE:"UPDATE_SITE",SITE_UPDATED:"SITE_UPDATED",DELETE_SITE:"DELETE_SITE",SITE_DELETED:"SITE_DELETED",ORDER_SITES:"ORDER_SITES"}}(window,document),function(e,t){"use strict";e.Actions=e.Actions||{},Object.assign(e.Actions,{getState:function(){return{type:ActionTypes.GET_STATE,meta:{remote:!0,url:"/_api/v1/state",dispatch:"setState"}}},setState:function(e){return{type:ActionTypes.SET_STATE,state:e}}})}(window,document),function(e,t){"use strict";e.Actions=e.Actions||{};var n="/_api/v1/";Object.assign(e.Actions,{createSite:function(e,t){return{type:ActionTypes.CREATE_SITE,meta:{remote:!0,url:n+"create-site",method:"POST",dispatch:"siteCreated",onComplete:t,data:{site:e}}}},siteCreated:function(e,t){return{type:ActionTypes.SITE_CREATED,site:e}},updateSite:function(e,t,s){return{type:ActionTypes.UPDATE_SITE,meta:{remote:!0,url:n+"update-site",method:"PATCH",data:{path:e,value:t},dispatch:"siteUpdated",onComplete:s},path:e,value:t}},siteUpdated:function(e){return{type:ActionTypes.SITE_UPDATED,resp:e}},deleteSite:function(e,t){return{type:ActionTypes.DELETE_SITE,meta:{remote:!0,url:n+"delete-site/"+encodeURIComponent(e),method:"DELETE",dispatch:"siteDeleted",onComplete:t},site:e}},siteDeleted:function(e){return{type:ActionTypes.SITE_DELETED,resp:e}},orderSites:function(e,t){return{type:ActionTypes.ORDER_SITES,meta:{remote:!0,method:"PUT",url:n+"order-sites",data:e,onComplete:t},sites:e}}})}(window,document),function(e,t){"use strict";function n(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}e.redux_middleware=function(e){return function(t){return function(s){if(s.meta&&s.meta.remote){var o=s.meta.method?s.meta.method:"GET";fetch(s.meta.url,{method:o,headers:{Accept:"application/json","Content-Type":"application/json"},body:"get"===o?void 0:JSON.stringify(s.meta.data)}).then(n).then(function(e){return e.json()}).then(function(t){s.meta&&s.meta.dispatch&&!t.error_message&&e.dispatch(Actions[s.meta.dispatch](t)),s.meta&&s.meta.onComplete&&s.meta.onComplete(t)})["catch"](function(e){console.log("Request failed:",e)})}return t(s)}}}}(window,document),function(e,t){"use strict";e.reducers=e.reducers||{},Object.assign(e.reducers,{sites:function(e,t){var n,s,o,i,r=[];switch(console.log(t),void 0===e&&(e=Immutable.Map()),t.type){case ActionTypes.SET_STATE:return Immutable.fromJS({site:t.state.site});case ActionTypes.SITE_CREATED:return r=e.getIn(["site"]).toJSON(),r.push(t.site),e.setIn(["site"],Immutable.fromJS(r));case ActionTypes.UPDATE_SITE:return n=t.path.split("/"),s=t.value,e.setIn(n,s);case ActionTypes.SITE_UPDATED:return n=t.resp.path.split("/"),s=t.resp.value,e.setIn(n,s);case ActionTypes.SITE_DELETED:return r=e.getIn(["site"]).toJSON(),o="0"===t.resp.name?"":t.resp.name,i=r.findIndex(function(e,t){return e.name===o}),i>-1?(r.splice(i,1),e.setIn(["site"],Immutable.fromJS(r))):e;case ActionTypes.ORDER_SITES:return t.sites.forEach(function(t,n){var s="0"===t?"":t;t=e.getIn(["site"]).toJSON().find(function(e,t){return e.name===s}),t&&r.push(t)}),r.length>0?e.setIn(["site"],Immutable.fromJS(r)):e;default:return e}}})}(window,document),function(e,t){"use strict";e.root_reducer=Redux.combineReducers(reducers)}(window,document),function(e,t){"use strict";var n=Redux.applyMiddleware(redux_middleware)(Redux.createStore);e.redux_store=n(root_reducer),redux_store.dispatch(Actions.getState())}(window,document);
//# sourceMappingURL=maps/ng-backend.min.js.map
