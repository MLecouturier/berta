!function(t,e){"use strict";t.getQueryParams=function(){var t=location.search.slice(1).split("&"),e={};return t.forEach(function(t){t[0]&&(t=t.split("="),e[t[0]]=decodeURIComponent(t[1]||""))}),e}}(window,document),function(t,e){"use strict";t.API_ROOT="/_api/v1/"}(window,document),function(t,e){"use strict";t.ActionTypes={GET_STATE:"GET_STATE",SET_STATE:"SET_STATE",CREATE_SITE:"CREATE_SITE",SITE_CREATED:"SITE_CREATED",UPDATE_SITE:"UPDATE_SITE",SITE_UPDATED:"SITE_UPDATED",DELETE_SITE:"DELETE_SITE",SITE_DELETED:"SITE_DELETED",ORDER_SITES:"ORDER_SITES",ORDER_SECTIONS:"ORDER_SECTIONS"}}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{getState:function(){return{type:ActionTypes.GET_STATE,meta:{remote:!0,url:"/_api/v1/state",dispatch:"setState"}}},setState:function(t){return{type:ActionTypes.SET_STATE,state:t}}})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{createSite:function(t,e){return{type:ActionTypes.CREATE_SITE,meta:{remote:!0,url:API_ROOT+"create-site",method:"POST",dispatch:"siteCreated",onComplete:e,data:{site:t}}}},siteCreated:function(t,e){return{type:ActionTypes.SITE_CREATED,site:t}},updateSite:function(t,e,n){return{type:ActionTypes.UPDATE_SITE,meta:{remote:!0,url:API_ROOT+"update-site",method:"PATCH",data:{path:t,value:e},dispatch:"siteUpdated",onComplete:n},path:t,value:e}},siteUpdated:function(t){return{type:ActionTypes.SITE_UPDATED,resp:t}},deleteSite:function(t,e){return{type:ActionTypes.DELETE_SITE,meta:{remote:!0,url:API_ROOT+"delete-site/"+encodeURIComponent(t),method:"DELETE",dispatch:"siteDeleted",onComplete:e},site:t}},siteDeleted:function(t){return{type:ActionTypes.SITE_DELETED,resp:t}},orderSites:function(t,e){return{type:ActionTypes.ORDER_SITES,meta:{remote:!0,method:"PUT",url:API_ROOT+"order-sites",data:t,onComplete:e},sites:t}}})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{orderSections:function(t,e){return{type:ActionTypes.ORDER_SECTIONS,meta:{remote:!0,method:"PUT",url:API_ROOT+"order-sections",data:{site:t,sections:e}},site:t,sections:e}}})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{})}(window,document),function(t,e){"use strict";function n(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}t.redux_middleware=function(t){return function(e){return function(s){if(s.meta&&s.meta.remote){var o=s.meta.method?s.meta.method:"GET";fetch(s.meta.url,{method:o,headers:{Accept:"application/json","Content-Type":"application/json"},body:"get"===o?void 0:JSON.stringify(s.meta.data)}).then(n).then(function(t){return t.json()}).then(function(e){s.meta&&s.meta.dispatch&&!e.error_message&&t.dispatch(Actions[s.meta.dispatch](e)),s.meta&&s.meta.onComplete&&s.meta.onComplete(e)})["catch"](function(t){console.log("Request failed:",t)})}return e(s)}}}}(window,document),function(t,e){"use strict";t.reducers=t.reducers||{},Object.assign(t.reducers,{sites:function(t,e){var n,s,o,i,c=[];switch(void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.SET_STATE:return console.log(e),Immutable.fromJS({site:e.state.site});case ActionTypes.SITE_CREATED:return console.log(e),c=t.getIn(["site"]).toJSON(),c.push(e.site),t.setIn(["site"],Immutable.fromJS(c));case ActionTypes.UPDATE_SITE:return console.log(e),n=e.path.split("/"),s=e.value,t.setIn(n,s);case ActionTypes.SITE_UPDATED:return console.log(e),n=e.resp.path.split("/"),s=e.resp.value,t.setIn(n,s);case ActionTypes.SITE_DELETED:return console.log(e),c=t.getIn(["site"]).toJSON(),o="0"===e.resp.name?"":e.resp.name,i=c.findIndex(function(t,e){return t.name===o}),i>-1?(c.splice(i,1),t.setIn(["site"],Immutable.fromJS(c))):t;case ActionTypes.ORDER_SITES:return console.log(e),e.sites.forEach(function(e,n){var s="0"===e?"":e;e=t.getIn(["site"]).toJSON().find(function(t,e){return t.name===s}),e&&c.push(e)}),c.length>0?t.setIn(["site"],Immutable.fromJS(c)):t;default:return t}}})}(window,document),function(t,e){"use strict";t.reducers=t.reducers||{},Object.assign(t.reducers,{settings:function(t,e){switch(console.log(e),void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.SET_STATE:return Immutable.fromJS(e.state.settings);default:return t}}})}(window,document),function(t,e){"use strict";t.reducers=t.reducers||{},Object.assign(t.reducers,{sections:function(t,e){var n,s=[];switch(void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.SET_STATE:return console.log(e),Immutable.fromJS(e.state.sections);case ActionTypes.ORDER_SECTIONS:return console.log(e),e.sections.forEach(function(o,i){n=t.getIn([e.site,"section"]).toJSON().find(function(t,e){return t.name===o}),n&&s.push(n)}),s.length>0?t.setIn([e.site,"section"],Immutable.fromJS(s)):t;default:return t}}})}(window,document),function(t,e){"use strict";t.reducers=t.reducers||{},Object.assign(t.reducers,{entries:function(t,e){switch(console.log(e),void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.SET_STATE:return Immutable.fromJS(e.state.entries);default:return t}}})}(window,document),function(t,e){"use strict";t.reducers=t.reducers||{},Object.assign(t.reducers,{tags:function(t,e){switch(console.log(e),void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.SET_STATE:return Immutable.fromJS(e.state.tags);default:return t}}})}(window,document),function(t,e){"use strict";t.root_reducer=Redux.combineReducers(reducers)}(window,document),function(t,e){"use strict";var n=Redux.applyMiddleware(redux_middleware)(Redux.createStore);t.redux_store=n(root_reducer),redux_store.dispatch(Actions.getState())}(window,document);
//# sourceMappingURL=maps/ng-backend.min.js.map
