!function(t,e){"use strict";t.ActionTypes={GET_STATE:"GET_STATE",SET_STATE:"SET_STATE",CREATE_SITE:"CREATE_SITE",SITE_CREATED:"SITE_CREATED",UPDATE_SITE:"UPDATE_SITE",SITE_UPDATED:"SITE_UPDATED",DELETE_SITE:"DELETE_SITE",SITE_DELETED:"SITE_DELETED",ORDER_SITES:"ORDER_SITES"}}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{},Object.assign(t.Actions,{getState:function(){return{type:ActionTypes.GET_STATE,meta:{remote:!0,url:"/_api/v1/state",dispatch:"setState"}}},setState:function(t){return{type:ActionTypes.SET_STATE,state:t}}})}(window,document),function(t,e){"use strict";t.Actions=t.Actions||{};var n="/_api/v1/";Object.assign(t.Actions,{createSite:function(t,e){return{type:ActionTypes.CREATE_SITE,meta:{remote:!0,url:n+"create-site",method:"POST",dispatch:"siteCreated",onComplete:e,data:{site:t}}}},siteCreated:function(t,e){return{type:ActionTypes.SITE_CREATED,site:t}},updateSite:function(t,e,s){return{type:ActionTypes.UPDATE_SITE,meta:{remote:!0,url:n+"update-site",method:"PATCH",data:{path:t,value:e},dispatch:"siteUpdated",onComplete:s},path:t,value:e}},siteUpdated:function(t){return{type:ActionTypes.SITE_UPDATED,resp:t}},deleteSite:function(t,e){return{type:ActionTypes.DELETE_SITE,meta:{remote:!0,url:n+"delete-site/"+encodeURIComponent(t),method:"DELETE",dispatch:"siteDeleted",onComplete:e},site:t}},siteDeleted:function(t){return{type:ActionTypes.SITE_DELETED,resp:t}},orderSites:function(t){return{type:ActionTypes.ORDER_SITES,meta:{remote:!0,method:"PUT",url:n+"order-sites",data:t},sites:t}}})}(window,document),function(t,e){"use strict";function n(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}t.redux_middleware=function(t){return function(e){return function(s){if(s.meta&&s.meta.remote){var i=s.meta.method?s.meta.method:"GET";fetch(s.meta.url,{method:i,headers:{Accept:"application/json","Content-Type":"application/json"},body:"get"===i?void 0:JSON.stringify(s.meta.data)}).then(n).then(function(t){return t.json()}).then(function(e){s.meta&&s.meta.dispatch&&!e.error_message&&t.dispatch(Actions[s.meta.dispatch](e)),s.meta&&s.meta.onComplete&&s.meta.onComplete(e)})["catch"](function(t){console.log("Request failed:",t)})}return e(s)}}}}(window,document),function(t,e){"use strict";t.reducer=function(t,e){var n,s,i,o,r=[];switch(console.log(e),void 0===t&&(t=Immutable.Map()),e.type){case ActionTypes.GET_STATE:return t;case ActionTypes.SET_STATE:return Immutable.fromJS(e.state);case ActionTypes.CREATE_SITE:return t;case ActionTypes.SITE_CREATED:return r=t.getIn(["site"]).toJSON(),r.push(e.site),t.setIn(["site"],Immutable.List(r));case ActionTypes.UPDATE_SITE:return n=e.path.split("/"),s=e.value,t.setIn(n,s);case ActionTypes.SITE_UPDATED:return n=e.resp.path.split("/"),s=e.resp.value,t.setIn(n,s);case ActionTypes.DELETE_SITE:return t;case ActionTypes.SITE_DELETED:return r=t.getIn(["site"]).toJSON(),i="0"===e.resp.name?"":e.resp.name,o=r.findIndex(function(t,e){return t.name===i}),o>-1?(r.splice(o,1),t.setIn(["site"],Immutable.List(r))):t;case ActionTypes.ORDER_SITES:return e.sites.forEach(function(e,n){var s="0"===e?"":e;e=t.getIn(["site"]).find(function(t,e){var n=t.toJSON();return n.name===s}),e&&r.push(e.toJSON())}),r.length>0?t.setIn(["site"],Immutable.List(r)):t;default:return t}}}(window,document),function(t,e){"use strict";var n=Redux.applyMiddleware(redux_middleware)(Redux.createStore);t.redux_store=n(reducer),redux_store.dispatch(Actions.getState())}(window,document);
//# sourceMappingURL=maps/ng-backend.min.js.map
